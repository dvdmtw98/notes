---
title: Transparent Data Encryption (TDE) Protector Key
---

In Synapse data by default is encrypted  
When using the default process we are not given a key for encryption/ decryption (It is managed by Synapse)

Synapse Provides the following options:
* Customer Managed Keys
* Bring Your Own Keys (BYOK)

When wanting to use custom managed keys Double Encryption needs to be enabled  
Double because a TDE Protector (Key to protect TDE Key) is created  
When speaking about custom keys TDE Protector is what is being discussed

For using this custom key in Synapse we need to create/ import/ restore the custom key into [Azure Key Vault](../../Azure%20Security%20Services/Azure%20Key%20Vault.md)  
For Synapse to be able to get the custom key and use it we need to assign Synapse the Get, Wrap Key and Unwrap Key permissions using [Azure Active Directory (AAD)](../../Azure%20Security%20Services/Azure%20Active%20Directory%20%28AAD%29.md)  
Azure Monitor can be used to Audit the logs that are generated by Key Vault

### Encryption/ Decryption Flow with TDE Protector

* The DEK that is used to encrypt the data in SQL Pool in Synapse is send to Key Vault where the Key is encrypted and then stored in a User Table in Synapse
* When the data needs to be read from Synapse the Encrypted DEK is sent to Key Vault where it is decrypted and this key is then used to decrypt the data in Synapse

### Best Practices for Custom Keys

The key needs to be 2048 to 3072 bytes in length  
When importing the key into Key Vault ensure its using .pfx, .byok, .backup extension  
If the key is generated in KV ensure to take a backup of the key before using the key